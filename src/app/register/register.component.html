<div class="container mt-5">
    <h2 class="mb-5">Register Form</h2>
    @if(msgErr){
      <p class="alert alert-danger">{{msgErr}}</p>
    }
    @if(msgSuc){
      <p class="alert alert-success">Success</p>
    }
    
    <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
        <!-- Name -->
        <div class="form-group mb-4">
            <label>Name</label>
            <input type="text" formControlName="name" class="form-control"
            [ngClass]="{
              'is-valid' : !registerForm.get('name')?.errors && (registerForm.get('name')?.touched ||registerForm.get('name')?.dirty),
              'is-invalid' : registerForm.get('name')?.errors && (registerForm.get('name')?.touched ||registerForm.get('name')?.dirty) 
            }"
             />
            @if(registerForm.get('name')?.errors && (registerForm.get('name')?.touched ||registerForm.get('name')?.dirty))
            {
              <div class="alert alert-danger w-100 mt-1 m-0">
                @if(registerForm.get('name')?.getError("required"))
                {
                  <p class="m-0">Name is Required</p>
                }
                @else if(registerForm.get('name')?.getError("pattern")){
                    <p class="m-0">Name should must Letter</p>
                }
                @else if(registerForm.get('name')?.getError("minlength")){
                    <p class="m-0">Name should br more than or equal 3 chars</p>
                }
                @else if(registerForm.get('name')?.getError("maxlength")){
                    <p class="m-0">Name should br less than or equal 20 chars</p>
                }
              </div>
            }
        </div>
        <!-- Email -->
        <div class="form-group mb-4">
            <label>Email address</label>
            <input type="email" formControlName="email" class="form-control" 
            [ngClass]="{
              'is-valid' : !registerForm.get('email')?.errors && (registerForm.get('email')?.touched ||registerForm.get('email')?.dirty),
              'is-invalid' : registerForm.get('email')?.errors && (registerForm.get('email')?.touched ||registerForm.get('email')?.dirty) 
            }"
            />
            @if(registerForm.get('email')?.errors && (registerForm.get('email')?.touched ||registerForm.get('email')?.dirty))
            {
            <div class="alert alert-danger w-100 mt-1">
                @if(registerForm.get('email')?.getError("required"))
                {
                <p class="m-0">Email is Required</p>
                }
                @else if(registerForm.get('email')?.getError("email"))
                {
                <p class="m-0">Invalid email format</p>
                }
                @else if(registerForm.get('email')?.getError("pattern"))
                {
                <p class="m-0">Invalid email format</p>
                }
            </div>
            }
        
        </div>

        <!-- Password -->
        <div class="form-group mb-4">
            <label>Password</label>
            <input type="password" formControlName="password" class="form-control"
            [ngClass]="{
              'is-valid' : !registerForm.get('password')?.errors && (registerForm.get('password')?.touched ||registerForm.get('password')?.dirty),
              'is-invalid' : registerForm.get('password')?.errors && (registerForm.get('password')?.touched ||registerForm.get('password')?.dirty) 
            }"
             />
            @if(registerForm.get('password')?.errors && (registerForm.get('password')?.touched ||registerForm.get('password')?.dirty))
            {
            <div class="alert alert-danger w-100 mt-1">
                @if(registerForm.get('password')?.getError("required"))
                {
                <p class="m-0">Password is required</p>
                }
                @else if(registerForm.get('password')?.getError("pattern"))
                {
                <p class="m-0">Must include uppercase, lowercase, number, and special character (* % $ #)</p>
                }
                @else if(registerForm.get('password')?.getError("minlength"))
                {
                <p class="m-0">Minimum 8 characters required</p>
                }
            </div>
            }
        </div>
  
        <!-- RePassword -->
        <div class="form-group mb-4">
            <label>Confirm Password</label>
            <input type="password" formControlName="rePassword" class="form-control"
            [ngClass]="{
              'is-valid' : !registerForm.get('rePassword')?.errors && (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty),
              'is-invalid' : registerForm.get('rePassword')?.errors && (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty) 
            }"
             />
        
            @if(registerForm.getError("mismatch") && (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty))
            {
            <p class="alert alert-danger m-1">Passwords do not match</p>
            }
            
        </div>

        <!-- Phone Number -->
        <div class="form-group mb-4">
            <label>Phone Number</label>
            <input type="text" formControlName="phone" class="form-control"
            [ngClass]="{
              'is-valid' : !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched ||registerForm.get('phone')?.dirty),
              'is-invalid' : registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched ||registerForm.get('phone')?.dirty) 
            }"
            />
            @if(registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched ||registerForm.get('phone')?.dirty))
            {
              <div class="alert alert-danger w-100 mt-1 m-0">
                @if(registerForm.get('phone')?.getError("required"))
                {
                  <p class="m-0">Phone is Required</p>
                }
                @else if(registerForm.get('phone')?.getError("pattern")){
                    <p class="m-0">Phone is Invalid (Only Egyptian Number)  </p>
                }
              </div>
            }
        </div>

      <button class="btn btn-info" type="submit" [disabled]="registerForm.invalid">Register
        @if(isLoading)
        {
            <span><i class="fas fa-spin fa-spinner"></i></span>
        }
      </button>
      <br>
      <p class="mt-2">Already have account!<a class="d-inline ms-1 text-decoration-underline text-white" routerLink="/login" routerLinkActive="active">login</a></p>
     
    </form>
</div>
  